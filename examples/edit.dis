EDIT.COM (Dos version 1)

MOV BX, 0x0464
MOV SP, BX
ADD BX, 0xF
SHR BX
SHR BX
SHR BX
SHR BX
MOV AH, 0x4a
INT 21
MOV DX, 0x0246
JNC +3
	JMP memory_full
MOV AX, CS
MOV [0x028a], AX
MOV AL, [0x0080]
CMP AL, 0x49
MOV DX, 0x025d
JA memory_full
CBW
MOV CX, AX
INC CX
ADD AX, 0x0008
NOP
MOV [0x0294], AL
MOV SI, 0x0081
MOV DI, 0x029c
REPZ MOVSB
MOV AX, [0x002c]
MOV ES, AX
XOR DI, DI
XOR AX, AX
MOV [0x0283], 0xffff
MOV CX, 0x0005
NOP
	MOV SI, 0x027e
	REP CMPS
	JNZ +4
 		MOV [0x0283], DI
	DEC DI
	MOV CX, 0x8000
	REPNZ SCASB
	CMP [ES:DI], AL
	JNZ -0x16
INC DI
SCASW
MOV SI, DI
MOV DI, 0x02e4
PUSH ES
POP DS
PUSH CS
POP ES
MOV AH, 0x30
INT 21
MOV BX, DI
CMP AL, 0x03
JB +0x14
	LODSB
	STOSB
	CMP AL, 0x5c
	JE 8a:
	CMP AL, 0x2f
	JE 8a:
	CMP AL, 0x3a
	JNE 8c:
8a:
	MOV BX, DI
8c:
	OR AL, AL
	JNZ -0x14
90:
PUSH CS
POP DS
CMP BX, 0x02e4
JNE +6
	MOV [0x0258], 1
	NOP
MOV DI, BX
MOV SI, 0x0273
MOV CX, 0x000b
NOP
REPZ MOVSB
MOV DX, 0x02e4
MOV BX, 0x0286
MOV AX, 0x4b00
INT 21
JNC +0x13
MOV DX, 0x021b
CMP AX, 0x0008
JNE +0x13
	be:
	PUSH CS
	POP DS
	MOV AH, 09
	INT 21
	MOV AX, 0x4cff
	INT 21
	…
CMP [0x0285], 00
MOV BX, 0x02e4
JE 90:
MOV DX, 0x0229
MOV AX, [0x002c]
MOV DS, AX
MOV SI, [CS:0x0283]
CMP SI, 0xff
JE 0xbe
PUSH CS
POP ES
MOV DI, 02e4
f2:
LODSB
STOSB
CMP AL, 0x3b
JE +7
	OR AL, AL
	JNZ 0xf2
	MOV SI, 0xffff
MOV [CS:0x0283], SI
DEC DI
MOV AL, 0x5c
CMP [ES:DI-1], AL
JE +8
…
MOV BX, DI
JMP 90

memory_full:
